<!doctype html>
<html>
  <head>
    <title>Fantasma</title>
    <meta http-equiv="Content-Type"
              content="text/html; charset=UTF-8">
  
  </head>
  <body>
  <script   src="three.min.js">
  </script>

  <script   src="ATARI_V.js">
  </script>
	  
  <script   src="ATARI_R.js">
  </script>

  <script   src="ATARI_B.js">
  </script>

  <script   src="ATARI_A.js">
  </script>

  <script>




function push(e){

	if (e.keyCode===65)
	A_V_malla.translateX( -1 );

	else if (e.keyCode===90)
	A_V_malla.translateX(  1 );
	

	else if (e.keyCode===83)
	A_V_malla.translateY(  -1 );

	else if (e.keyCode===68)
	A_V_malla.translateY(  1 );
	}


var listener = function() {
	camara.aspect = window.innerWidth/window.innerHeight;
	camara.updateProjectionMatrix();
	renderer.setSize(window.innerWidth, window.innerHeight);
	}



function setup(){
	escena = new THREE.Scene();
	camara = new THREE.PerspectiveCamera();
	camara.position.z = 90;

	renderer = new THREE.WebGLRenderer();
	renderer.setSize( window.innerHeight*.95, 
                      window.innerHeight*.95 );
	document.body.appendChild(renderer.domElement);

for(j = 0; j <80; j++){

	for(i = 0; i < j/5; i++){

		//malla = new THREE.Mesh(new THREE.SphereGeometry((Math.random()+2),20,20), new THREE.MeshNormalMaterial());
		
		
		malla = new THREE.Mesh( A_V_forma,A_V_material);
		malla.translateX( 50*(2*Math.random()-1) );
		malla.translateY( 50*(2*Math.random()-1) );
		malla.translateZ( (-300*Math.random())-300*j);
		escena.add(malla);	
		
		malla1 = new THREE.Mesh( A_R_forma,A_R_material);
		malla1.translateX( 50*(2*Math.random()-1) );
		malla1.translateY( 50*(2*Math.random()-1) );
		malla1.translateZ( (-300*Math.random())-300*j);
		escena.add(malla1);	
		
		malla2 = new THREE.Mesh( A_B_forma,A_B_material);
		malla2.translateX( 50*(2*Math.random()-1) );
		malla2.translateY( 50*(2*Math.random()-1) );
		malla2.translateZ( (-300*Math.random())-300*j);
		escena.add(malla2);
		
		malla3 = new THREE.Mesh( A_A_forma,A_A_material);
		malla3.translateX( 50*(2*Math.random()-1) );
		malla3.translateY( 50*(2*Math.random()-1) );
		malla3.translateZ( (-300*Math.random())-300*j);
		escena.add(malla3);
	}

}	


	escena.add(A_V_malla);

	var tipoEvento = 'resize';
	var capturar = false;

	window.addEventListener( tipoEvento, listener, capturar);
	window.addEventListener( 'keydown',push, false);

	}



function loop(){
	requestAnimationFrame( loop );
	
	
	camara.position.z-=2;
	A_V_malla.translateZ(  -2 );


	renderer.render( escena, camara ); 
	}





var camara, renderer, escena, i;
setup();
loop();






    </script>
  </body>
</html>
