
<!doctype html>
<html>
  <head>
    <title>ViajeEstrellas</title>
    <meta http-equiv="Content-Type"
              content="text/html; charset=UTF-8">  
    <style>
      body { text-align: center; }
    </style>
	  
  <canvas id= "luzSombras" width= "600" heigth= "600">
      &iexcl;No funciona!
  </canvas>
	  	  
	  
	  
	  
  </head>
  <body>
	  
	  
	  
  <script src="three.min.js">
  </script>


  <script>

// Funcion de movimiento con el teclado4
	function push(e){
		if (e.keyCode===65)	pos = 1;
		if (e.keyCode===90)	pos = 2;
		if (e.keyCode===83)	pos = 3;
		if (e.keyCode===68)	pos = 4;
		if (e.keyCode===88)    {pos = 5; tabla.position.y=-3}
		if (e.keyCode===67)    {tabla.position.y=-20}
		if (e.keyCode===70)    camara.position.z+= 1;
		if (e.keyCode===86)    camara.position.z-= 1;
	}

	  
// Funcion para ajuste de pantalla
	var listener = function() {
		camara.aspect = window.innerWidth/window.innerHeight;
		camara.updateProjectionMatrix();
		renderer.setSize(window.innerWidth, window.innerHeight);
	}

	
// Declaración de Agente
	function Agent(x=0, y=0){
		THREE.Object3D.call(this);
		this.position.x= x;
		this.position.y= y;
	}
	Agent.prototype = new THREE.Object3D();
	Agent.prototype.sense= function(environment) {};
	Agent.prototype.plan= function(environment) {};
	Agent.prototype.act= function(environment) {};

	  
// Declaración del Ambiente
	function Environment(){
		THREE.Scene.call(this);
	} Environment.prototype= new THREE.Scene();
	  
	
	  
	  
	  
	Environment.prototype.sense = function(){
		for(var i=0; i< this.children.length; i++){
			if (this.children[i].sense !== undefined)
				this.children[i].sense(this);
	}}
	Environment.prototype.plan= function(){
		for(var i=0; i< this.children.length; i++){
			if (this.children[i].plan !== undefined)
				this.children[i].plan(this);
	}}
	Environment.prototype.act = function (){
		for(var i=0; i< this.children.length; i++){
			if (this.children[i].act !== undefined)
				this.children[i].act(this);	
	}}
	

// Declarar un Agente llamado Nave
	function Nave (r,x=0, y=0){
		Agent.call(this,x,y);
		var escalaTIE = r;		
		var cabinaForma = new THREE.SphereGeometry(1*escalaTIE);
		var cabinaMalla = new THREE.Mesh(cabinaForma);		
		var ala1Forma = new THREE.CylinderGeometry(1.5*escalaTIE, 1.5*escalaTIE, 0.25*escalaTIE, 6);
		ala1Forma.rotateZ( Math.PI/2);
		ala1Forma.translate(-1.5*escalaTIE,0,0);
		var ala1Malla = new THREE.Mesh(ala1Forma);		
		var ala2Forma = new THREE.CylinderGeometry(1.5*escalaTIE, 1.5*escalaTIE, 0.25*escalaTIE, 6);
		ala2Forma.rotateZ( Math.PI/2);
		ala2Forma.translate(1.5*escalaTIE,0,0);
		var ala2Malla = new THREE.Mesh(ala2Forma);
		var soporteForma = new THREE.CylinderGeometry(0.3*escalaTIE, 0.3*escalaTIE, 3*escalaTIE);
		soporteForma.rotateZ( Math.PI/2);
		var soporteMalla = new THREE.Mesh(soporteForma); 
		var TIEForma = new THREE.Geometry();		
		TIEForma.merge(cabinaMalla.geometry, cabinaMalla.matrix);
		TIEForma.merge(ala1Malla.geometry, ala1Malla.matrix);
		TIEForma.merge(ala2Malla.geometry, ala2Malla.matrix);
		TIEForma.merge(soporteMalla.geometry, soporteMalla.matrix);		
		THREE.ImageUtils.crossOrigin = '';
		var TIE_textura  = THREE.ImageUtils.loadTexture('nave.jpg');
		var TIE_material  = new THREE.MeshBasicMaterial( {map: TIE_textura} );		
		var TIE = new THREE.Mesh(TIEForma,TIE_material);		
		TIE.castShadow = true;		
		this.add(TIE);	
		this.step= 0;
		this.colision=0;
		this.radius = r;
		this.sensor1= new THREE.Raycaster( this.position,new THREE.Vector3(0,0,-1));
	}Nave.prototype= new Agent();

	  
	  
	Nave.prototype.sense = function(environment){	
		this.sensor1.set(this.position, new THREE.Vector3(0,0,-1));
		var obstaculo1= this.sensor1.intersectObjects(environment.children,true);
		if ( (obstaculo1.length >0 && ( obstaculo1[0].distance <=2)))
			this.colision= 1;
		else
			this.colision=0;
		};
	  
	  

	Nave.prototype.act= function(environment) {
		if (this.colision===1){	this.step= 0; sound.pause ();}
		else{
			if(pos==1)	this.position.y += this.step/10;
			if(pos==2)	this.position.y -= this.step/10;
			if(pos==3)	this.position.x -= this.step/10;
			if(pos==4)	this.position.x += this.step/10;
			if(pos==5)	this.step = 1;
		}
		if(this.position.x<-15)	{this.step = 0;sound.pause ();}
		if(this.position.x>15)	{this.step = 0;sound.pause ();}
		if(this.position.y>15)	{this.step = 0;sound.pause ();}
		if(this.position.y<-15)	{this.step = 0;sound.pause ();}
			
		
		this.position.z -= this.step;
		camara.position.z-=this.step;
		iluminacion.position.z-=this.step;
		abajoMalla.position.z -= this.step;
	};



	  
	  
// Declarar un Agente llamado Fant_Az
	function Fant_Az(size, x=0, y=0,z=0){		
		THREE.Object3D.call(this,x,y,z);		
		THREE.ImageUtils.crossOrigin = '';
  		var textura   = THREE.ImageUtils.loadTexture('espacio.jpg');
  		var Fanmaterial  = new THREE.MeshBasicMaterial( {map: textura} );
		var P4figura = new THREE.Shape();
		P4figura.lineTo(0*size,0*size);P4figura.lineTo(1*size,0*size);P4figura.lineTo(1*size,1*size);P4figura.lineTo(2*size,1*size);P4figura.lineTo(2*size,2*size);P4figura.lineTo(3*size,2*size);
		P4figura.lineTo(3*size,1*size);P4figura.lineTo(4*size,1*size);P4figura.lineTo(4*size,0*size);P4figura.lineTo(6*size,0*size);P4figura.lineTo(6*size,2*size);P4figura.lineTo(8*size,2*size);
		P4figura.lineTo(8*size,0*size);P4figura.lineTo(10*size,0*size);P4figura.lineTo(10*size,1*size);P4figura.lineTo(11*size,1*size);P4figura.lineTo(11*size,2*size);P4figura.lineTo(12*size,2*size);
		P4figura.lineTo(12*size,1*size);P4figura.lineTo(13*size,1*size);P4figura.lineTo(13*size,0*size);P4figura.lineTo(14*size,0*size);P4figura.lineTo(14*size,8*size);P4figura.lineTo(13*size,8*size);
		P4figura.lineTo(13*size,11*size);P4figura.lineTo(12*size,11*size);P4figura.lineTo(12*size,12*size);P4figura.lineTo(11*size,12*size);P4figura.lineTo(11*size,13*size);P4figura.lineTo(9*size,13*size);
		P4figura.lineTo(9*size,14*size);P4figura.lineTo(5*size,14*size);P4figura.lineTo(5*size,13*size);P4figura.lineTo(3*size,13*size);P4figura.lineTo(3*size,12*size);P4figura.lineTo(2*size,12*size);
		P4figura.lineTo(2*size,11*size);P4figura.lineTo(1*size,11*size);P4figura.lineTo(1*size,8*size);P4figura.lineTo(0*size,8*size);
		var P4extrudeSettings = {steps: 2, amount: 6, bevelEnabled: true, bevelThickness: 1, bevelSize: 1, bevelSegments: 1};
		var P4forma = new THREE.ExtrudeGeometry( P4figura,P4extrudeSettings);
		var Fanmalla = new THREE.Mesh( P4forma, Fanmaterial );		
		Fanmalla .receiveShadow = true;
		this.add(Fanmalla);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;		
	}Fant_Az.prototype= new THREE.Object3D();	  
	  
	 
	  
	  
	  
// Declarar un Agente llamado Fant_Am
	function Fant_Am(size, x=0, y=0,z=0){		
		THREE.Object3D.call(this,x,y,z);		
		THREE.ImageUtils.crossOrigin = '';
  		var textura   = THREE.ImageUtils.loadTexture('amar.jpg');
  		var Fanmaterial  = new THREE.MeshBasicMaterial( {map: textura} );
		var P4figura = new THREE.Shape();
		P4figura.lineTo(0*size,0*size);P4figura.lineTo(1*size,0*size);P4figura.lineTo(1*size,1*size);P4figura.lineTo(2*size,1*size);P4figura.lineTo(2*size,2*size);P4figura.lineTo(3*size,2*size);
		P4figura.lineTo(3*size,1*size);P4figura.lineTo(4*size,1*size);P4figura.lineTo(4*size,0*size);P4figura.lineTo(6*size,0*size);P4figura.lineTo(6*size,2*size);P4figura.lineTo(8*size,2*size);
		P4figura.lineTo(8*size,0*size);P4figura.lineTo(10*size,0*size);P4figura.lineTo(10*size,1*size);P4figura.lineTo(11*size,1*size);P4figura.lineTo(11*size,2*size);P4figura.lineTo(12*size,2*size);
		P4figura.lineTo(12*size,1*size);P4figura.lineTo(13*size,1*size);P4figura.lineTo(13*size,0*size);P4figura.lineTo(14*size,0*size);P4figura.lineTo(14*size,8*size);P4figura.lineTo(13*size,8*size);
		P4figura.lineTo(13*size,11*size);P4figura.lineTo(12*size,11*size);P4figura.lineTo(12*size,12*size);P4figura.lineTo(11*size,12*size);P4figura.lineTo(11*size,13*size);P4figura.lineTo(9*size,13*size);
		P4figura.lineTo(9*size,14*size);P4figura.lineTo(5*size,14*size);P4figura.lineTo(5*size,13*size);P4figura.lineTo(3*size,13*size);P4figura.lineTo(3*size,12*size);P4figura.lineTo(2*size,12*size);
		P4figura.lineTo(2*size,11*size);P4figura.lineTo(1*size,11*size);P4figura.lineTo(1*size,8*size);P4figura.lineTo(0*size,8*size);
		var P4extrudeSettings = {steps: 2, amount: 6, bevelEnabled: true, bevelThickness: 1, bevelSize: 1, bevelSegments: 1};
		var P4forma = new THREE.ExtrudeGeometry( P4figura,P4extrudeSettings);
		var Fanmalla = new THREE.Mesh( P4forma, Fanmaterial );		
		Fanmalla .receiveShadow = true;
		this.add(Fanmalla);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;		
	}Fant_Am.prototype= new THREE.Object3D();	  
	  
	  
	  
// Declarar un Agente llamado Fant_R
	function Fant_R(size, x=0, y=0,z=0){		
		THREE.Object3D.call(this,x,y,z);		
		THREE.ImageUtils.crossOrigin = '';
  		var textura   = THREE.ImageUtils.loadTexture('red.jpg');
  		var Fanmaterial  = new THREE.MeshBasicMaterial( {map: textura} );
		var P4figura = new THREE.Shape();
		P4figura.lineTo(0*size,0*size);P4figura.lineTo(1*size,0*size);P4figura.lineTo(1*size,1*size);P4figura.lineTo(2*size,1*size);P4figura.lineTo(2*size,2*size);P4figura.lineTo(3*size,2*size);
		P4figura.lineTo(3*size,1*size);P4figura.lineTo(4*size,1*size);P4figura.lineTo(4*size,0*size);P4figura.lineTo(6*size,0*size);P4figura.lineTo(6*size,2*size);P4figura.lineTo(8*size,2*size);
		P4figura.lineTo(8*size,0*size);P4figura.lineTo(10*size,0*size);P4figura.lineTo(10*size,1*size);P4figura.lineTo(11*size,1*size);P4figura.lineTo(11*size,2*size);P4figura.lineTo(12*size,2*size);
		P4figura.lineTo(12*size,1*size);P4figura.lineTo(13*size,1*size);P4figura.lineTo(13*size,0*size);P4figura.lineTo(14*size,0*size);P4figura.lineTo(14*size,8*size);P4figura.lineTo(13*size,8*size);
		P4figura.lineTo(13*size,11*size);P4figura.lineTo(12*size,11*size);P4figura.lineTo(12*size,12*size);P4figura.lineTo(11*size,12*size);P4figura.lineTo(11*size,13*size);P4figura.lineTo(9*size,13*size);
		P4figura.lineTo(9*size,14*size);P4figura.lineTo(5*size,14*size);P4figura.lineTo(5*size,13*size);P4figura.lineTo(3*size,13*size);P4figura.lineTo(3*size,12*size);P4figura.lineTo(2*size,12*size);
		P4figura.lineTo(2*size,11*size);P4figura.lineTo(1*size,11*size);P4figura.lineTo(1*size,8*size);P4figura.lineTo(0*size,8*size);
		var P4extrudeSettings = {steps: 2, amount: 6, bevelEnabled: true, bevelThickness: 1, bevelSize: 1, bevelSegments: 1};
		var P4forma = new THREE.ExtrudeGeometry( P4figura,P4extrudeSettings);
		var Fanmalla = new THREE.Mesh( P4forma, Fanmaterial );		
		Fanmalla .receiveShadow = true;
		this.add(Fanmalla);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;		
	}Fant_R.prototype= new THREE.Object3D();	  
	  
	  
// Declarar un Agente llamado Fant_V
	function Fant_V(size, x=0, y=0,z=0){		
		THREE.Object3D.call(this,x,y,z);		
		THREE.ImageUtils.crossOrigin = '';
  		var textura   = THREE.ImageUtils.loadTexture('erdes.jpg');
  		var Fanmaterial  = new THREE.MeshBasicMaterial( {map: textura} );
		var P4figura = new THREE.Shape();
		P4figura.lineTo(0*size,0*size);P4figura.lineTo(1*size,0*size);P4figura.lineTo(1*size,1*size);P4figura.lineTo(2*size,1*size);P4figura.lineTo(2*size,2*size);P4figura.lineTo(3*size,2*size);
		P4figura.lineTo(3*size,1*size);P4figura.lineTo(4*size,1*size);P4figura.lineTo(4*size,0*size);P4figura.lineTo(6*size,0*size);P4figura.lineTo(6*size,2*size);P4figura.lineTo(8*size,2*size);
		P4figura.lineTo(8*size,0*size);P4figura.lineTo(10*size,0*size);P4figura.lineTo(10*size,1*size);P4figura.lineTo(11*size,1*size);P4figura.lineTo(11*size,2*size);P4figura.lineTo(12*size,2*size);
		P4figura.lineTo(12*size,1*size);P4figura.lineTo(13*size,1*size);P4figura.lineTo(13*size,0*size);P4figura.lineTo(14*size,0*size);P4figura.lineTo(14*size,8*size);P4figura.lineTo(13*size,8*size);
		P4figura.lineTo(13*size,11*size);P4figura.lineTo(12*size,11*size);P4figura.lineTo(12*size,12*size);P4figura.lineTo(11*size,12*size);P4figura.lineTo(11*size,13*size);P4figura.lineTo(9*size,13*size);
		P4figura.lineTo(9*size,14*size);P4figura.lineTo(5*size,14*size);P4figura.lineTo(5*size,13*size);P4figura.lineTo(3*size,13*size);P4figura.lineTo(3*size,12*size);P4figura.lineTo(2*size,12*size);
		P4figura.lineTo(2*size,11*size);P4figura.lineTo(1*size,11*size);P4figura.lineTo(1*size,8*size);P4figura.lineTo(0*size,8*size);
		var P4extrudeSettings = {steps: 2, amount: 6, bevelEnabled: true, bevelThickness: 1, bevelSize: 1, bevelSegments: 1};
		var P4forma = new THREE.ExtrudeGeometry( P4figura,P4extrudeSettings);
		var Fanmalla = new THREE.Mesh( P4forma, Fanmaterial );		
		Fanmalla .receiveShadow = true;
		this.add(Fanmalla);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;		
	}Fant_V.prototype= new THREE.Object3D();
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
// Declarar un Agente llamado Atari_Az
	function Atari_Az(size, x=0, y=0,z=0){		
		THREE.Object3D.call(this,x,y,z);		
		THREE.ImageUtils.crossOrigin = '';
		var A_A_textura   = THREE.ImageUtils.loadTexture('espacio.jpg');
		var A_A_material = new THREE.MeshLambertMaterial({map: A_A_textura});
		var A_A_figura = new THREE.Shape();		
		A_A_figura.lineTo(0*size,0*size);A_A_figura.lineTo(1*size,0*size);A_A_figura.lineTo(1*size,2*size);A_A_figura.lineTo(2*size,2*size);A_A_figura.lineTo(2*size,1*size);
		A_A_figura.lineTo(3*size,1*size);A_A_figura.lineTo(3*size,2*size);A_A_figura.lineTo(4*size,2*size);A_A_figura.lineTo(4*size,1*size);A_A_figura.lineTo(5*size,1*size);
		A_A_figura.lineTo(5*size,2*size);A_A_figura.lineTo(6*size,2*size);A_A_figura.lineTo(6*size,0*size);A_A_figura.lineTo(7*size,0*size);A_A_figura.lineTo(7*size,4*size);
		A_A_figura.lineTo(6*size,4*size);A_A_figura.lineTo(6*size,5*size);A_A_figura.lineTo(7*size,5*size);A_A_figura.lineTo(7*size,7*size);A_A_figura.lineTo(6*size,7*size);
		A_A_figura.lineTo(6*size,6*size);A_A_figura.lineTo(4*size,6*size);A_A_figura.lineTo(4*size,7*size);A_A_figura.lineTo(3*size,7*size);A_A_figura.lineTo(3*size,6*size);
		A_A_figura.lineTo(1*size,6*size);A_A_figura.lineTo(1*size,7*size);A_A_figura.lineTo(0*size,7*size);A_A_figura.lineTo(0*size,5*size);A_A_figura.lineTo(1*size,5*size);
		A_A_figura.lineTo(1*size,4*size);A_A_figura.lineTo(0*size,4*size);
		var A_A_extrudeSettings = {steps: 2,amount: 1,bevelEnabled: true,bevelThickness: 1,bevelSize: 1,bevelSegments: 1};
		var A_A_forma = new THREE.ExtrudeGeometry( A_A_figura,A_A_extrudeSettings);	
		var A_A_malla = new THREE.Mesh( A_A_forma, A_A_material );		
		A_A_malla.receiveShadow = true;
		this.add(A_A_malla);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;
	}Atari_Az.prototype= new THREE.Object3D();	  
	  
	  
	  
	  
// Declarar un Agente llamado Atari_Am
	function Atari_Am(size, x=0, y=0,z=0){		
		THREE.Object3D.call(this,x,y,z);		
		
		THREE.ImageUtils.crossOrigin = '';
		var A_B_textura   = THREE.ImageUtils.loadTexture('amar.jpg');
		var A_B_material = new THREE.MeshLambertMaterial({map: A_B_textura} );		
		var A_B_figura = new THREE.Shape();
		
		A_B_figura.lineTo(0*size,0*size);A_B_figura.lineTo(1*size,0*size);A_B_figura.lineTo(1*size,2*size);A_B_figura.lineTo(2*size,2*size);A_B_figura.lineTo(2*size,1*size);
		A_B_figura.lineTo(3*size,1*size);A_B_figura.lineTo(3*size,2*size);A_B_figura.lineTo(4*size,2*size);A_B_figura.lineTo(4*size,1*size);A_B_figura.lineTo(5*size,1*size);
		A_B_figura.lineTo(5*size,2*size);A_B_figura.lineTo(6*size,2*size);A_B_figura.lineTo(6*size,0*size);A_B_figura.lineTo(7*size,0*size);A_B_figura.lineTo(7*size,4*size);
		A_B_figura.lineTo(6*size,4*size);A_B_figura.lineTo(6*size,5*size);A_B_figura.lineTo(7*size,5*size);A_B_figura.lineTo(7*size,7*size);A_B_figura.lineTo(6*size,7*size);
		A_B_figura.lineTo(6*size,6*size);A_B_figura.lineTo(4*size,6*size);A_B_figura.lineTo(4*size,7*size);A_B_figura.lineTo(3*size,7*size);A_B_figura.lineTo(3*size,6*size);
		A_B_figura.lineTo(1*size,6*size);A_B_figura.lineTo(1*size,7*size);A_B_figura.lineTo(0*size,7*size);A_B_figura.lineTo(0*size,5*size);A_B_figura.lineTo(1*size,5*size);
		A_B_figura.lineTo(1*size,4*size);A_B_figura.lineTo(0*size,4*size);
		var A_B_extrudeSettings = {steps: 2, amount: 1, bevelEnabled: true, bevelThickness: 1, bevelSize: 1, bevelSegments: 1};
		var A_B_forma = new THREE.ExtrudeGeometry( A_B_figura,A_B_extrudeSettings);	
		var A_B_malla = new THREE.Mesh( A_B_forma, A_B_material );		
		A_B_malla.receiveShadow = true;
		this.add(A_B_malla);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;
	}Atari_Am.prototype= new THREE.Object3D();	
	  
	  
	  
	  
	  
	  
	  
	  
// Declarar un Agente llamado Atari_R
	function Atari_R(size, x=0, y=0,z=0){		
		THREE.Object3D.call(this,x,y,z);			

		THREE.ImageUtils.crossOrigin = '';
		var A_R_textura   = THREE.ImageUtils.loadTexture('red.jpg');		
		var A_R_material = new THREE.MeshLambertMaterial({map: A_R_textura}  );		
		var A_R_figura = new THREE.Shape();		
		A_R_figura.lineTo(0*size,0*size);A_R_figura.lineTo(1*size,0*size);A_R_figura.lineTo(1*size,2*size);A_R_figura.lineTo(2*size,2*size);A_R_figura.lineTo(2*size,1*size);
		A_R_figura.lineTo(3*size,1*size);A_R_figura.lineTo(3*size,2*size);A_R_figura.lineTo(4*size,2*size);A_R_figura.lineTo(4*size,1*size);A_R_figura.lineTo(5*size,1*size);
		A_R_figura.lineTo(5*size,2*size);A_R_figura.lineTo(6*size,2*size);A_R_figura.lineTo(6*size,0*size);A_R_figura.lineTo(7*size,0*size);A_R_figura.lineTo(7*size,4*size);
		A_R_figura.lineTo(6*size,4*size);A_R_figura.lineTo(6*size,5*size);A_R_figura.lineTo(7*size,5*size);A_R_figura.lineTo(7*size,7*size);A_R_figura.lineTo(6*size,7*size);
		A_R_figura.lineTo(6*size,6*size);A_R_figura.lineTo(4*size,6*size);A_R_figura.lineTo(4*size,7*size);A_R_figura.lineTo(3*size,7*size);A_R_figura.lineTo(3*size,6*size);
		A_R_figura.lineTo(1*size,6*size);A_R_figura.lineTo(1*size,7*size);A_R_figura.lineTo(0*size,7*size);A_R_figura.lineTo(0*size,5*size);A_R_figura.lineTo(1*size,5*size);
		A_R_figura.lineTo(1*size,4*size);A_R_figura.lineTo(0*size,4*size);
		var A_R_extrudeSettings = {steps: 2, amount: 1,	bevelEnabled: true, bevelThickness: 1, bevelSize: 1, bevelSegments: 1};
		var A_R_forma = new THREE.ExtrudeGeometry( A_R_figura,A_R_extrudeSettings);	
		var A_R_malla = new THREE.Mesh( A_R_forma, A_R_material );		
		
		A_R_malla.receiveShadow = true;
		this.add(A_R_malla);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;
	}Atari_R.prototype= new THREE.Object3D();	
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
// Declarar un Agente llamado Atari_V
	function Atari_V(size, x=0, y=0,z=0){		
		THREE.Object3D.call(this,x,y,z);
		THREE.ImageUtils.crossOrigin = '';
		var A_V_textura   = THREE.ImageUtils.loadTexture('erdes.jpg');
		var A_V_material = new THREE.MeshLambertMaterial({map: A_V_textura} );		
		var A_V_figura = new THREE.Shape();
		A_V_figura.lineTo(0*size,0*size);A_V_figura.lineTo(1*size,0*size);A_V_figura.lineTo(1*size,2*size);A_V_figura.lineTo(2*size,2*size);A_V_figura.lineTo(2*size,1*size);
		A_V_figura.lineTo(3*size,1*size);A_V_figura.lineTo(3*size,2*size);A_V_figura.lineTo(4*size,2*size);A_V_figura.lineTo(4*size,1*size);A_V_figura.lineTo(5*size,1*size);
		A_V_figura.lineTo(5*size,2*size);A_V_figura.lineTo(6*size,2*size);A_V_figura.lineTo(6*size,0*size);A_V_figura.lineTo(7*size,0*size);A_V_figura.lineTo(7*size,4*size);
		A_V_figura.lineTo(6*size,4*size);A_V_figura.lineTo(6*size,5*size);A_V_figura.lineTo(7*size,5*size);A_V_figura.lineTo(7*size,7*size);A_V_figura.lineTo(6*size,7*size);
		A_V_figura.lineTo(6*size,6*size);A_V_figura.lineTo(4*size,6*size);A_V_figura.lineTo(4*size,7*size);A_V_figura.lineTo(3*size,7*size);A_V_figura.lineTo(3*size,6*size);
		A_V_figura.lineTo(1*size,6*size);A_V_figura.lineTo(1*size,7*size);A_V_figura.lineTo(0*size,7*size);A_V_figura.lineTo(0*size,5*size);A_V_figura.lineTo(1*size,5*size);
		A_V_figura.lineTo(1*size,4*size);A_V_figura.lineTo(0*size,4*size);
		var A_V_extrudeSettings = {steps: 2, amount: 1,	bevelEnabled: true, bevelThickness: 1, bevelSize: 1, bevelSegments: 1};
		var A_V_forma = new THREE.ExtrudeGeometry( A_V_figura,A_V_extrudeSettings);	
		var A_V_malla = new THREE.Mesh( A_V_forma, A_V_material );		
		A_V_malla.receiveShadow = true;
		this.add(A_V_malla);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;
	}Atari_V.prototype= new THREE.Object3D();	
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
// Declarar un Agente llamado Tor
	function Tor(size, x=0, y=0,z=0){		
		THREE.Object3D.call(this,x,y,z);		
		THREE.ImageUtils.crossOrigin = '';
		var cajatextura1   = THREE.ImageUtils.loadTexture('Lave2.jpg');		
		var cajamaterial1  = new THREE.MeshLambertMaterial({map: cajatextura1});		
		var pp1 = new THREE.Mesh(new THREE.TorusKnotGeometry(1*size,3,100,12,3,4),cajamaterial1);		
		pp1.receiveShadow = true;
		this.add(pp1);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;
	}Tor.prototype= new THREE.Object3D();
	  
	  
// Declarar un Agente llamado San
	function San(size, x=0, y=0,z=0){		
		THREE.Object3D.call(this,x,y,z);
		
		THREE.ImageUtils.crossOrigin = '';
		var Santextura   = THREE.ImageUtils.loadTexture('nave.jpg');
		var Sanmaterial = new THREE.MeshLambertMaterial({map: Santextura} );	
		
		
		
	var cabeza = new THREE.SphereGeometry(4.5,15,15);
	cabeza.translate(0,12,0);
	var cabezaM = new THREE.Mesh(cabeza);
      	var cono2 = new THREE.ConeGeometry( 1.3 , 4, 32 );
	cono2.rotateZ(Math.PI/2);
	var conoM2 = new THREE.Mesh(cono2.translate(-7,12,0));
	var cono3 = new THREE.ConeGeometry( 1.3 , 4, 32 );
	cono3.rotateZ(Math.PI/-2);
	var conoM3 = new THREE.Mesh(cono3.translate(7,12,0));	
	var cilindroMin = new THREE.CylinderGeometry( 2, 1.5, 2, 16 );
	cilindroMin.rotateZ(Math.PI/2);
	var cilindroMinM = new THREE.Mesh(cilindroMin.translate(-4.2,12,0));
	var cilindroMin2 = new THREE.CylinderGeometry( 2, 1.5, 2, 16 );
	cilindroMin2.rotateZ(Math.PI/-2);
	var cilindroMinM2 = new THREE.Mesh(cilindroMin2.translate(4.2,12,0));
			
	var Cabeza = new THREE.Geometry();
	var CabezaMaterial = new THREE.MeshNormalMaterial(  );
	Cabeza.merge(cabezaM.geometry, cabezaM.matrix);
	Cabeza.merge(conoM2.geometry, conoM2.matrix);
	Cabeza.merge(conoM3.geometry, conoM3.matrix);
	Cabeza.merge(cilindroMinM.geometry, cilindroMinM.matrix);
	Cabeza.merge(cilindroMinM2.geometry, cilindroMinM2.matrix);
	var CabezaM = new THREE.Mesh( Cabeza, CabezaMaterial )




	var cuerpo = new THREE.SphereGeometry(6.8,15,15);
	var cuerpoM = new THREE.Mesh(cuerpo);
	var cono = new THREE.ConeGeometry( 2.8, 10, 32 );
	cono.translate(0,13,0);
	var conoM = new THREE.Mesh(cono.rotateX(Math.PI));
	var cilindro = new THREE.CylinderGeometry( 4.5, 3, 2, 16 );
	cilindro.translate(0,7.2,0);
	var cilindroM = new THREE.Mesh(cilindro.rotateX(Math.PI));
	var cilindro2 = new THREE.CylinderGeometry( 4.5, 3, 2, 16 );
	cilindro2.translate(0,7.2,0);
	var cilindroM2 = new THREE.Mesh(cilindro2.rotateZ(Math.PI/2));
	var cilindro3 = new THREE.CylinderGeometry( 4.5, 3, 2, 16 );
	cilindro3.translate(0,7.2,0);
	var cilindroM3 = new THREE.Mesh(cilindro3.rotateZ(Math.PI/-2));

	var Principal = new THREE.Geometry();
	var PrincipalMaterial = new THREE.MeshNormalMaterial(  );
	Principal.merge(conoM.geometry, conoM.matrix);
	Principal.merge(cilindroM.geometry, cilindroM.matrix);	
	Principal.merge(cilindroM3.geometry, cilindroM3.matrix);	
	Principal.merge(cilindroM2.geometry, cilindroM2.matrix);	
	Principal.merge(cuerpoM.geometry, cuerpoM.matrix);
	var PrinM = new THREE.Mesh(Principal,PrincipalMaterial);




	var toro = new THREE.TorusGeometry( 6, 0.5, 10, 8 );
	toro.rotateY( Math.PI/2 );
        var toroM = new THREE.Mesh(toro.translate(10.5,0,0));
	var toro2 = new THREE.TorusGeometry( 4.5, 0.5, 10, 8 );
	toro2.rotateY( Math.PI/2 );
        var toroM2 = new THREE.Mesh(toro2.translate(13.5,0,0));
	var toro3 = new THREE.TorusGeometry( 3.5, 0.5, 10, 8 );
	toro3.rotateY( Math.PI/2 );
        var toroM3 = new THREE.Mesh(toro3.translate(16.5,0,0));
	var toro4 = new THREE.TorusGeometry( 6, 0.5, 10, 8 );
	toro4.rotateY( Math.PI/2 );
        var toroM4 = new THREE.Mesh(toro4.translate(-10.5,0,0));
	var toro5 = new THREE.TorusGeometry( 4.5, 0.5, 10, 8 );
	toro5.rotateY( Math.PI/2 );
        var toroM5 = new THREE.Mesh(toro5.translate(-13.5,0,0));
	var toro6 = new THREE.TorusGeometry( 3.5, 0.5, 10, 8 );
	toro6.rotateY( Math.PI/2 );
        var toroM6 = new THREE.Mesh(toro6.translate(-16.5,0,0));

	var manoI = new THREE.SphereGeometry(2.3,15,15);
	var manoIM = new THREE.Mesh(manoI.translate(21,0,0));
	var manoD = new THREE.SphereGeometry(2.3,15,15);
	var manoDM = new THREE.Mesh(manoD.translate(-21,0,0));
	
	var Brazos = new THREE.Geometry();
	var BrazosMaterial = new THREE.MeshNormalMaterial(  );;
	Brazos.merge(toroM.geometry, toroM.matrix);
	Brazos.merge(toroM2.geometry, toroM2.matrix);
	Brazos.merge(toroM3.geometry, toroM3.matrix);
	Brazos.merge(toroM4.geometry, toroM4.matrix);
	Brazos.merge(toroM5.geometry, toroM5.matrix);
	Brazos.merge(toroM6.geometry, toroM6.matrix);
	Brazos.merge(manoIM.geometry, manoIM.matrix);
	Brazos.merge(manoDM.geometry, manoDM.matrix);
	var BrazosM = new THREE.Mesh(Brazos, BrazosMaterial);



	var Saga = new THREE.Geometry();
	var SagaMaterial = new THREE.MeshNormalMaterial(  );
	Saga.merge(CabezaM.geometry, CabezaM.matrix);
	Saga.merge(PrinM.geometry, PrinM.matrix);
	Saga.merge(BrazosM.geometry, BrazosM.matrix);
	Saga.rotateX( Math.PI/8 );
	Saga.rotateY( Math.PI/-7 );
	
	var SagaM = new THREE.Mesh(Saga, Sanmaterial);

		
		
		
		SagaM.receiveShadow = true;
		this.add(SagaM);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;
	}San.prototype= new THREE.Object3D();  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
// Declarar un Agente llamado Reliquia
	function Reli(size, x=0, y=0,z=0){		
		THREE.Object3D.call(this,x,y,z);
		
		THREE.ImageUtils.crossOrigin = '';
		var Relitextura   = THREE.ImageUtils.loadTexture('rocas.jpg');		
		var Relimaterial  = new THREE.MeshLambertMaterial({map: Relitextura});		
		var cuerpo = new THREE.SphereGeometry(6,15,15);
		var cuerpoM = new THREE.Mesh(cuerpo);
		var cilindro = new THREE.CylinderGeometry( 4.5, 3, 2, 16 );
		cilindro.translate(0,6.5,0);
		var cilindroM = new THREE.Mesh(cilindro);
		var cono = new THREE.ConeGeometry( 2.8, 10, 32 );
		cono.translate(0,12,0);
		var conoM = new THREE.Mesh(cono);
		var bola = new THREE.SphereGeometry(1,15,15);
		bola.translate(0,17,0);
		var bolaM = new THREE.Mesh(bola);
		var Punta = new THREE.Geometry();
		Punta.merge(cilindroM.geometry, cilindroM.matrix);
		Punta.merge(conoM.geometry, conoM.matrix);
		Punta.merge(bolaM.geometry, bolaM.matrix);
		var PuntaM = new THREE.Mesh(Punta);	
	var Punta2 = new THREE.Geometry();
	Punta2.merge(cilindroM.geometry, cilindroM.matrix);
	Punta2.merge(conoM.geometry, conoM.matrix);
	Punta2.merge(bolaM.geometry, bolaM.matrix);
	Punta2.rotateZ(Math.PI/2)		
	var PuntaM2 = new THREE.Mesh(Punta2);
	
	var Punta3 = new THREE.Geometry();
	Punta3.merge(cilindroM.geometry, cilindroM.matrix);
	Punta3.merge(conoM.geometry, conoM.matrix);
	Punta3.merge(bolaM.geometry, bolaM.matrix);
	Punta3.rotateZ(Math.PI/-2)		
	var PuntaM3 = new THREE.Mesh(Punta3);
	
		
	var toro = new THREE.TorusGeometry( 6, 0.7, 10, 8 );
	toro.translate(0,0,7);
	toro.rotateX( Math.PI/2 );
        
	var toro2 = new THREE.TorusGeometry( 4, 0.7, 10, 8 );
	toro2.translate(0,0,10);
	toro2.rotateX( Math.PI/2 );
        
	var toro3 = new THREE.TorusGeometry( 2, 0.7, 10, 8 );
	toro3.translate(0,0,13);
	toro3.rotateX( Math.PI/2 );
        
	var conomini = new THREE.ConeGeometry( 1, 4, 32 );
	conomini.translate(0,17,0);
	conomini.rotateX( Math.PI );
        	
	var toroM = new THREE.Mesh( toro );
	var toroM2 = new THREE.Mesh( toro2 );
	var toroM3 = new THREE.Mesh( toro3 );
	var conominiM = new THREE.Mesh( conomini );
	
	var Reliquia = new THREE.Geometry();
	var ReliquiaMaterial = new THREE.MeshNormalMaterial(  );
	Reliquia.merge(cuerpoM.geometry, cuerpoM.matrix);
	Reliquia.merge(PuntaM.geometry, PuntaM.matrix);
	Reliquia.merge(PuntaM2.geometry, PuntaM2.matrix);
	Reliquia.merge(PuntaM3.geometry, PuntaM3.matrix);
	
	Reliquia.merge(toroM.geometry, toroM.matrix);
	Reliquia.merge(toroM2.geometry, toroM2.matrix);		
	Reliquia.merge(toroM3.geometry, toroM3.matrix);		
	Reliquia.merge(conominiM.geometry, conominiM.matrix);	
	Reliquia.rotateX( Math.PI/8 );
	Reliquia.rotateY( Math.PI/-8 );
	var ReliquiaM = new THREE.Mesh( Reliquia, Relimaterial )
	  
		
		
		
		
		ReliquiaM.receiveShadow = true;
		this.add(ReliquiaM);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;
	}Reli.prototype= new THREE.Object3D();
	  
	  
	  
	  

	  
// Declarar un Agente llamado Abajo
	function Abajo(size, x=0, y=0,z=0){		
		THREE.Object3D.call(this,x,y,z);		
		THREE.ImageUtils.crossOrigin = '';
		var abajo_textura = THREE.ImageUtils.loadTexture('ala.jpg');		
		var abajo_material  = new THREE.MeshLambertMaterial({map: abajo_textura});		
		abajoMalla = new THREE.Mesh(new THREE.CylinderGeometry( 8, 8, 0.25, 6 ),abajo_material);			
		abajoMalla.receiveShadow = true;
		this.add(abajoMalla);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;
	}Abajo.prototype= new THREE.Object3D();
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  
	  

// Declarar un Agente llamado Pared1
	function Pared1(size, x=0, y=0,z=0){		
		THREE.Object3D.call(this,x,y,z);		
		THREE.ImageUtils.crossOrigin = '';
		var cajatextura1   = THREE.ImageUtils.loadTexture('bmetal.jpg');		
		var cajamaterial1  = new THREE.MeshLambertMaterial({map: cajatextura1});
		var pp1 = new THREE.Mesh(new THREE.BoxGeometry(size, size, 2),cajamaterial1);		
		pp1.receiveShadow = true;
		this.add(pp1);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;
	}Pared1.prototype= new THREE.Object3D();
	  
	  
	  
// Declarar un Agente llamado Pared2
	function Pared2(size, x=0, y=0,z=0){	
		THREE.Object3D.call(this,x,y,z);		
		THREE.ImageUtils.crossOrigin = '';
		var cajatextura2   = THREE.ImageUtils.loadTexture('metal.jpg');
		var cajamaterial2  = new THREE.MeshLambertMaterial({map: cajatextura2});
		pp2 = new THREE.Mesh(new THREE.BoxGeometry(size, size, 2),cajamaterial2);
		pp2.receiveShadow = true;
		this.add(pp2);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;
	}Pared2.prototype= new THREE.Object3D();


// Declarar el Agente corrrespondiente al Asteroide Basico
	function Ast_Basico(size, x=0, y=0,z=0){	
		  THREE.Object3D.call(this,x,y,z);
	          var L = size;
		  THREE.ImageUtils.crossOrigin = '';
		  var ast_textura2   = THREE.ImageUtils.loadTexture('Gris.jpg');		
		  var material  = new THREE.MeshLambertMaterial({map: ast_textura2} );
		  var crp_basico = new THREE.SphereGeometry(3*L,6,6);
		  var crp_basicoM = new THREE.Mesh(crp_basico, material);
		  var toro1 = new THREE.TorusGeometry( 0.8*L, 0.2*L, 8, 8 );
		  toro1.rotateX(Math.PI/-5);  
		  toro1.rotateY(Math.PI/4);  	
		  toro1.translate(1.61*L,1.61*L,1.61*L);
		  var toroM1 = new THREE.Mesh(toro1, material);
		  var toro2 = new THREE.TorusGeometry( 0.6*L, 0.15*L, 8, 8 );
		  toro2.rotateX(Math.PI/-7);  
		  toro2.rotateY(Math.PI/-4);  	
		  toro2.translate(-1.85*L,1*L,2*L);
		  var toroM2 = new THREE.Mesh(toro2, material);
		  var toro3 = new THREE.TorusGeometry( 0.6*L, 0.15*L, 8, 8 );
		  toro3.rotateX(Math.PI/6);  
		  toro3.rotateY(Math.PI/-4);  	
		  toro3.translate(-1.5*L,-1.7*L,1.85*L);
		  var toroM3 = new THREE.Mesh(toro3, material);
		  var toro4 = new THREE.TorusGeometry( 0.7*L, 0.18*L, 8, 8 );
		  toro4.translate(0.1*L,-0.1*L,2.6*L);
		  var toroM4 = new THREE.Mesh(toro4, material);
		  var toro5 = new THREE.TorusGeometry( 0.6*L, 0.15*L, 8, 8 );
		  toro5.rotateX(Math.PI/6);  
		  toro5.rotateY(Math.PI/4);  	
		  toro5.translate(1.5*L,-1.7*L,1.85*L);
		  var toroM5 = new THREE.Mesh(toro5, material);
		  var toro6 = new THREE.TorusGeometry( 0.8*L, 0.2*L, 5, 5 );
		  toro6.rotateX(Math.PI/2);  	
		  toro6.rotateZ(Math.PI/10);  	
		  toro6.translate(-0.8*L,2.7*L,0.3*L);
		  var toroM6 = new THREE.Mesh(toro6, material);
		  var toro7 = new THREE.TorusGeometry( 0.6*L, 0.2*L, 6, 6 );
		  toro7.rotateY(Math.PI/2);  	
		  toro7.translate(2.75*L,-0.1*L,0);
		  var toroM7 = new THREE.Mesh(toro7, material);
		  var toro8 = new THREE.TorusGeometry( 0.6*L, 0.2*L, 5, 5 );
		  toro8.rotateX(Math.PI/2);  	
		  toro8.translate(0,-2.75*L,0.4*L);
		  var toroM8 = new THREE.Mesh(toro8, material);
		  var toro9 = new THREE.TorusGeometry( 0.4*L, 0.2*L, 5, 5 );
		  toro9.rotateY(Math.PI/2);  	
		  toro9.translate(-2.80*L,-0.4*L,0);
		  var toroM9 = new THREE.Mesh(toro9, material);
		  var Asteroide = new THREE.Geometry();
		  Asteroide.merge(crp_basicoM.geometry, crp_basicoM.matrix);
		  Asteroide.merge(toroM1.geometry, toroM1.matrix);
		  Asteroide.merge(toroM2.geometry, toroM2.matrix);
		  Asteroide.merge(toroM3.geometry, toroM3.matrix);
		  Asteroide.merge(toroM4.geometry, toroM4.matrix);
		  Asteroide.merge(toroM5.geometry, toroM5.matrix);
		  Asteroide.merge(toroM6.geometry, toroM6.matrix);
		  Asteroide.merge(toroM7.geometry, toroM7.matrix);
		  Asteroide.merge(toroM8.geometry, toroM8.matrix);
		  Asteroide.merge(toroM9.geometry, toroM9.matrix);
		  var AsteroideM = new THREE.Mesh( Asteroide, material );
		  AsteroideM.receiveShadow = true; 
		  this.add(AsteroideM);
	       	  this.size= size;
		  this.position.x= x;
		  this.position.y=y;
		  this.position.z=z;
	}Ast_Basico.prototype= new THREE.Object3D();  
	   
	  
	 
// Declarar el Agente corrrespondiente al Asteroide de Puntas
	function Ast_Punta(size, x=0, y=0,z=0){	
		  THREE.Object3D.call(this,x,y,z);
		  var K=size;
		  THREE.ImageUtils.crossOrigin = '';
		  var ast_textura1   = THREE.ImageUtils.loadTexture('Lave2.jpg');		
		  var material  = new THREE.MeshLambertMaterial({map: ast_textura1});		
		  var crp_Punta = new THREE.SphereGeometry(3*K,7,7);
		  var crp_PuntaM = new THREE.Mesh(crp_Punta, material);
		  var punta1 = new THREE.ConeGeometry( 0.8*K, 1.0*K, 7 );
		  punta1.rotateZ(Math.PI/3.5);
		  punta1.rotateY(Math.PI/4);
		  punta1.translate(-1.7*K,1.7*K,2.2*K);
		  var puntaM1 = new THREE.Mesh(punta1, material);
		  var punta2 = new THREE.ConeGeometry( 1.0*K, 1.0*K, 7 );
		  punta2.rotateZ(Math.PI/-4);
		  punta2.rotateX(Math.PI/4);
		  punta2.translate(1.9*K,1.7*K,2.2*K);
		  var puntaM2 = new THREE.Mesh(punta2, material);
		  var punta3 = new THREE.ConeGeometry( 0.9*K, 0.8*K, 7);
		  punta3.rotateZ(Math.PI/-3);
		  punta3.rotateY(Math.PI/-4);
		  punta3.rotateX(Math.PI/2.4);
		  punta3.translate(1.9*K,-1.7*K,2.0*K);
		  var puntaM3 = new THREE.Mesh(punta3, material);
		  var punta4 = new THREE.ConeGeometry( 1.0*K, 1.0*K, 7 );
		  punta4.rotateX(Math.PI/2); 
		  punta4.translate(-0.2*K,0,4.4*K);
		  var puntaM4 =  new THREE.Mesh(punta4, material);
		  var punta5 = new THREE.ConeGeometry( 0.4*K, 0.8*K, 7 );
		  punta5.rotateZ(Math.PI*0.8);
		  punta5.rotateY(Math.PI*0.2);
		  punta5.rotateX(Math.PI*-0.2);
		  punta5.translate(-1.8*K,-1.8*K,2.2*K);
		  var puntaM5 =  new THREE.Mesh(punta5, material);
		  var punta5 = new THREE.ConeGeometry( 0.6*K, 0.8*K, 7 );
		  punta5.rotateZ(Math.PI*0.8);
		  punta5.rotateY(Math.PI*0.2);
		  punta5.rotateX(Math.PI*-0.2);
		  punta5.translate(-1.8*K,-1.8*K,2.2*K);
		  var puntaM5 =  new THREE.Mesh(punta5, material);
		  var punta6 = new THREE.ConeGeometry( 0.5*K, 0.8*K, 7 );
		  punta6.rotateZ(Math.PI);
		  punta6.rotateX(Math.PI*-0.3);
		  punta6.translate(-0.2*K,-2.5*K,2.5*K);
		  var puntaM6 =  new THREE.Mesh(punta6, material);
		  var punta7 = new THREE.ConeGeometry( 1.0*K, 0.8*K, 7 );
		  punta7.rotateZ(Math.PI/2);
		  punta7.rotateY(Math.PI*0.1);
		  punta7.translate(-3.2*K,0,0);
		  var puntaM7 =  new THREE.Mesh(punta7, material);
		  var punta8 = new THREE.ConeGeometry( 1.0*K, 0.8*K, 7 );
		  punta8.translate(0,3.15*K,0);
		  var puntaM8 =  new THREE.Mesh(punta8, material);
		  var punta9 = new THREE.ConeGeometry( 1.0*K, 0.8*K, 7 );
		  punta9.rotateZ(Math.PI/-2);
		  punta9.rotateY(Math.PI*-0.1);
		  punta9.translate(3.0*K,0,0.3*K);
		  var puntaM9 =  new THREE.Mesh(punta9, material);
		  var Ast_Punta = new THREE.Geometry();
		  Ast_Punta.merge(crp_PuntaM.geometry, crp_PuntaM.matrix);
		  Ast_Punta.merge(puntaM1.geometry, puntaM1.matrix);
		  Ast_Punta.merge(puntaM2.geometry, puntaM2.matrix);
		  Ast_Punta.merge(puntaM3.geometry, puntaM3.matrix);
		  Ast_Punta.merge(puntaM4.geometry, puntaM4.matrix);
		  Ast_Punta.merge(puntaM5.geometry, puntaM5.matrix);
		  Ast_Punta.merge(puntaM6.geometry, puntaM6.matrix);
		  Ast_Punta.merge(puntaM7.geometry, puntaM7.matrix);
		  Ast_Punta.merge(puntaM8.geometry, puntaM8.matrix);
		  Ast_Punta.merge(puntaM9.geometry, puntaM9.matrix);
		  var Ast_PuntaM = new THREE.Mesh( Ast_Punta, material );		
		  Ast_PuntaM.receiveShadow = true; 
	          this.add(Ast_PuntaM);
	       	  this.size= size;
		  this.position.x= x;
		  this.position.y=y;
		  this.position.z=z;
	}Ast_Punta.prototype= new THREE.Object3D();  
	  
	
// Declarar un Agente llamado Dode
      function Dode(size, x=0, y=0,z=0){	
          THREE.Object3D.call(this,x,y,z);	  
	  Q=size;
	  THREE.ImageUtils.crossOrigin = '';
          var ast_textura3   = THREE.ImageUtils.loadTexture('Azul.jpg');          
	  var material = new THREE.MeshLambertMaterial({map: ast_textura3} );		     	
	  var crp_dode = new THREE.DodecahedronGeometry(3*Q,0);
	  crp_dode.rotateX(Math.PI/4);  	
	  crp_dode.rotateY(Math.PI/4);  	
	  var crp_dodeM = new THREE.Mesh(crp_dode, material);
	  crp_dodeM.receiveShadow = true; 	      
	  this.add(crp_dodeM);
	  this.size= size;
	  this.position.x=x;
	  this.position.y=y;
          this.position.z=z;
	}Dode.prototype= new THREE.Object3D();

	  

// Declarar un Agente llamado Atari
	function Atari(size, x=0, y=0,z=0){	
		THREE.Object3D.call(this,x,y,z);
		var P2figura = new THREE.Shape();
		var escalaAtari = size;
		P2figura.lineTo(0*escalaAtari,0*escalaAtari);P2figura.lineTo(1*escalaAtari,0*escalaAtari);P2figura.lineTo(1*escalaAtari,2*escalaAtari);P2figura.lineTo(2*escalaAtari,2*escalaAtari);P2figura.lineTo(2*escalaAtari,1*escalaAtari);
		P2figura.lineTo(3*escalaAtari,1*escalaAtari);P2figura.lineTo(3*escalaAtari,2*escalaAtari);P2figura.lineTo(4*escalaAtari,2*escalaAtari);P2figura.lineTo(4*escalaAtari,1*escalaAtari);P2figura.lineTo(5*escalaAtari,1*escalaAtari);
		P2figura.lineTo(5*escalaAtari,2*escalaAtari);P2figura.lineTo(6*escalaAtari,2*escalaAtari);P2figura.lineTo(6*escalaAtari,0*escalaAtari);P2figura.lineTo(7*escalaAtari,0*escalaAtari);P2figura.lineTo(7*escalaAtari,4*escalaAtari);
		P2figura.lineTo(6*escalaAtari,4*escalaAtari);P2figura.lineTo(6*escalaAtari,5*escalaAtari);P2figura.lineTo(7*escalaAtari,5*escalaAtari);P2figura.lineTo(7*escalaAtari,7*escalaAtari);P2figura.lineTo(6*escalaAtari,7*escalaAtari);
		P2figura.lineTo(6*escalaAtari,6*escalaAtari);P2figura.lineTo(4*escalaAtari,6*escalaAtari);P2figura.lineTo(4*escalaAtari,7*escalaAtari);P2figura.lineTo(3*escalaAtari,7*escalaAtari);P2figura.lineTo(3*escalaAtari,6*escalaAtari);
		P2figura.lineTo(1*escalaAtari,6*escalaAtari);P2figura.lineTo(1*escalaAtari,7*escalaAtari);P2figura.lineTo(0*escalaAtari,7*escalaAtari);P2figura.lineTo(0*escalaAtari,5*escalaAtari);P2figura.lineTo(1*escalaAtari,5*escalaAtari);
		P2figura.lineTo(1*escalaAtari,4*escalaAtari);P2figura.lineTo(0*escalaAtari,4*escalaAtari);
		var P2extrudeSettings = {steps: 2*escalaAtari,amount: 1*escalaAtari,bevelEnabled: true,bevelThickness: 1*escalaAtari,bevelSize: 1*escalaAtari,bevelSegments: 1*escalaAtari};
		var P2forma = new THREE.ExtrudeGeometry( P2figura,P2extrudeSettings);
		P2forma.translate(-3.5*escalaAtari,-3.5*escalaAtari,0);		
		THREE.ImageUtils.crossOrigin = '';
                var P2textura   = THREE.ImageUtils.loadTexture('amar.jpg');
                var P2material  = new THREE.MeshBasicMaterial( {map: P2textura} );
	        var P2malla = new THREE.Mesh( P2forma, P2material );
		this.add(P2malla);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;
	}Atari.prototype= new THREE.Object3D();

	  

// Declarar un Agente llamado Fantasma
	function Fantasma(size, x=0, y=0,z=0){	
		THREE.Object3D.call(this,x,y,z);		
		var P4figura = new THREE.Shape();
		var escalaFan = size;
		P4figura.lineTo(0*escalaFan,0*escalaFan);P4figura.lineTo(1*escalaFan,0*escalaFan);P4figura.lineTo(1*escalaFan,1*escalaFan);P4figura.lineTo(2*escalaFan,1*escalaFan);P4figura.lineTo(2*escalaFan,2*escalaFan);
		P4figura.lineTo(3*escalaFan,2*escalaFan);P4figura.lineTo(3*escalaFan,1*escalaFan);P4figura.lineTo(4*escalaFan,1*escalaFan);P4figura.lineTo(4*escalaFan,0*escalaFan);P4figura.lineTo(6*escalaFan,0*escalaFan);
		P4figura.lineTo(6*escalaFan,2*escalaFan);P4figura.lineTo(8*escalaFan,2*escalaFan);P4figura.lineTo(8*escalaFan,0*escalaFan);P4figura.lineTo(10*escalaFan,0*escalaFan);P4figura.lineTo(10*escalaFan,1*escalaFan);
		P4figura.lineTo(11*escalaFan,1*escalaFan);P4figura.lineTo(11*escalaFan,2*escalaFan);P4figura.lineTo(12*escalaFan,2*escalaFan);P4figura.lineTo(12*escalaFan,1*escalaFan);P4figura.lineTo(13*escalaFan,1*escalaFan);
		P4figura.lineTo(13*escalaFan,0*escalaFan);P4figura.lineTo(14*escalaFan,0*escalaFan);P4figura.lineTo(14*escalaFan,8*escalaFan);P4figura.lineTo(13*escalaFan,8*escalaFan);P4figura.lineTo(13*escalaFan,11*escalaFan);
		P4figura.lineTo(12*escalaFan,11*escalaFan);P4figura.lineTo(12*escalaFan,12*escalaFan);P4figura.lineTo(11*escalaFan,12*escalaFan);P4figura.lineTo(11*escalaFan,13*escalaFan);P4figura.lineTo(9*escalaFan,13*escalaFan);
		P4figura.lineTo(9*escalaFan,14*escalaFan);P4figura.lineTo(5*escalaFan,14*escalaFan);P4figura.lineTo(5*escalaFan,13*escalaFan);P4figura.lineTo(3*escalaFan,13*escalaFan);P4figura.lineTo(3*escalaFan,12*escalaFan);
		P4figura.lineTo(2*escalaFan,12*escalaFan);P4figura.lineTo(2*escalaFan,11*escalaFan);P4figura.lineTo(1*escalaFan,11*escalaFan);P4figura.lineTo(1*escalaFan,8*escalaFan);P4figura.lineTo(0*escalaFan,8*escalaFan);
		var P4extrudeSettings = {steps: 2*escalaFan,amount: 6*escalaFan,bevelEnabled: true,bevelThickness: 1*escalaFan,bevelSize: 1*escalaFan,bevelSegments: 1*escalaFan};
		var P4forma = new THREE.ExtrudeGeometry( P4figura,P4extrudeSettings);
		P4forma.translate(-7*escalaFan,-7*escalaFan,0);
		var P4material = new THREE.MeshNormalMaterial();
		var P4malla = new THREE.Mesh( P4forma, P4material );
		this.add(P4malla);
		this.size= size;
		this.position.x= x;
		this.position.y=y;
		this.position.z=z;
	}Fantasma.prototype= new THREE.Object3D();




// Configuración del programa
	function setup(){
		
		iluminacion = new THREE.PointLight(0xFFFFFF);
		iluminacion.position.y= 100; 
		iluminacion.position.z= 50; 
		
		entorno = new Environment();
		camara = new THREE.PerspectiveCamera();
		camara.position.z=30;
		camara.position.y=3;	
		listener = new THREE.AudioListener();
		camara.add( listener );
		sound = new THREE.Audio( listener );
		audioLoader = new THREE.AudioLoader();
		audioLoader.load( 'cancion.ogg', function( buffer ) {sound.setBuffer( buffer );sound.setLoop(true);sound.setVolume(1);sound.play();});

		
		THREE.ImageUtils.crossOrigin = '';
		var tablero_textura = THREE.ImageUtils.loadTexture('Instrucciones.jpg');		
		var tablero_material  = new THREE.MeshBasicMaterial({map: tablero_textura});		
		tableroMalla = new THREE.Mesh(new THREE.BoxGeometry(25, 25, 2),tablero_material);
		tableroMalla.position.z=2;
		tableroMalla.position.y=3;
		

		
		

		
		
		
		var ancho = -1*100;
		var largo = 20;
		
		tabla = new Abajo(1,0,-20,0);
		entorno.add(tabla);
		
		

		for(j = 0; j <largo; j++){
		for(i = 0; i < j/4; i++){
			entorno.add(new Ast_Basico(1.5,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));			
		}}
		
		for(j; j <2*largo; j++){
		for(i = 0; i < (j-largo)/4; i++){
			entorno.add(new Ast_Punta(1.8,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
		}}

		for(j; j <3*largo; j++){
		for(i = 0; i < (j-2*largo)/4; i++){
			entorno.add(new Dode(2,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
		}}			
		
		for(j; j <4*largo; j++){
		for(i = 0; i < (j-3*largo)/4; i++){
			entorno.add(new Pared1(10,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
		}}
		
		for(j; j <5*largo; j++){
		for(i = 0; i < (j-4*largo)/4; i++){
			entorno.add(new Pared2(10,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
		}}
		
		for(j; j <6*largo; j++){
		for(i = 0; i < (j-5*largo)/6; i++){
			entorno.add(new Pared1(10,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
			entorno.add(new Pared2(10,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
		}}		
		
		for(j; j <7*largo; j++){
		for(i = 0; i < (j-6*largo)/8; i++){
			entorno.add(new Ast_Basico(1.5,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
			entorno.add(new Ast_Punta(1.8,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
			entorno.add(new Dode(2,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
		}}
		
		for(j; j <8*largo; j++){
		for(i = 0; i < (j-7*largo)/10; i++){
			entorno.add(new Atari_Az(1,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
			entorno.add(new Atari_Am(1,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
			entorno.add(new Atari_R(1,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
			entorno.add(new Atari_V(1,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
		}}
		
		for(j; j <9*largo; j++){
		for(i = 0; i < (j-8*largo)/10; i++){
			entorno.add(new Fant_Az(1,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
			entorno.add(new Fant_Am(1,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
			entorno.add(new Fant_R(1,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
			entorno.add(new Fant_V(1,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
		}}
		
		
		for(j; j <10*largo; j++){
		for(i = 0; i < (j-9*largo)/10; i++){
			entorno.add(new Tor(5,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
		}}
		
		for(j; j <11*largo; j++){
		for(i = 0; i < (j-10*largo)/10; i++){
			entorno.add(new Tor(8,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
		}}
		
		for(j; j <12*largo; j++){
		for(i = 0; i < (j-11*largo)/10; i++){
			entorno.add(new Reli(1,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
		}}
		
		for(j; j <13*largo; j++){
		for(i = 0; i < (j-12*largo)/10; i++){
			entorno.add(new Reli(1,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
		}}
		
		for(j; j <14*largo; j++){
		for(i = 0; i < (j-13*largo)/10; i++){
			entorno.add(new San(1,20*(2*Math.random()-1),20*(2*Math.random()-1),(ancho*Math.random())+ancho*j));
		}}
		
		

		
		

		
		entorno.add(new Nave(1,0,0));
		
		entorno.add(camara);
		
		
		entorno.add(iluminacion);
		entorno.add(tableroMalla);
		
		lienzo= document.getElementById("luzSombras");		
		renderer = new THREE.WebGLRenderer({canvas: lienzo, antialias: true});
		renderer.setSize(600,600);
		renderer.shadowMapEnabled= true;
		
		tableroMalla.receiveShadow= true;
		iluminacion.castShadow= true;
		
		var tipoEvento = 'resize';
		var capturar = false;
		window.addEventListener( tipoEvento, listener, capturar);
		window.addEventListener( 'keydown',push, false);
	}

	  
	  
// Inicio del programa
	function loop(){
		requestAnimationFrame( loop);
 		entorno.sense();
		entorno.plan();
		entorno.act();
		renderer.render(entorno, camara);
	}

	  
	  
// Declaración de variables
	var entorno, camara, renderer,abajoMalla,tabla;
	var pos,iluminacion,lienzo;
	var listener, sound, audioLoader;
	var tableroForma, tableroMaterial,tableroMalla;	  
	  
	setup();
	loop();

    </script>
  </body>
</html>










